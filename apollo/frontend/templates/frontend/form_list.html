{% extends "frontend/_layout.html" %}
{% block toolbar %}
<a class="btn btn-sm btn-warning pull-right" data-toggle="modal" data-target="#checklistModal" href="#"><span class="glyphicon glyphicon-list-alt"></span> {% trans %}Create checklists{% endtrans %}</a>
<a class="btn btn-sm btn-default pull-right" href="{{ url_for('forms.new_form') }}" style="margin-right: 1em"><span class="glyphicon glyphicon-plus"></span> {% trans %}Add form{% endtrans %}</a>
{% endblock %}
{% block content %}
<div class="row">
	<div class="col-md-12">
    <table class="table table-striped table-bordered table-hover">
      <thead>
        <tr>
          <th>{% trans %}Name{% endtrans %}</th>
          <th width="100px">{% trans %}Type{% endtrans %}</th>
          <th width="132px" class="text-center">{% trans %}Form Actions{% endtrans %}</th>
        </tr>
      </thead>
      <tbody>
      {% for form in forms %}
        <tr>
          <td style="vertical-align: middle">{{ form.name }}</td>
          <td style="vertical-align: middle"><span class="label {% if form.form_type == 'CHECKLIST' %}label-primary{% else %}label-default{% endif %}">{{ form.form_type }}</span></td>
          <td><ul class="nav nav-pills">
            <li role="presentation" class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-expanded="false">{% trans %}Form Actions{% endtrans %} <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                <li><a href="{{ url_for('forms.edit_form', pk=form.pk) }}">{% trans %}Properties{% endtrans %}</a></li>
                <li><a href="{{ url_for('forms.form_builder', pk=form.pk) }}">{% trans %}Builder{% endtrans %}</a></li>
                {% if form.form_type == 'CHECKLIST' %}<li><a href="{{ url_for('forms.quality_assurance', pk=form.pk) }}">{% trans %}Quality Assurance{% endtrans %}</a></li>{% endif %}
              </ul>
            </li>
          </ul></td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
    <form class="form-horizontal" method="POST" action="" id="checklistInitForm">
      <div class="modal fade" id="checklistModal" tabindex="-1" role="dialog" aria-labelledby="checklistModalLabel">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
              <h4 class="modal-title" id="checklistModalLabel">{% trans %}Create checklists{% endtrans %}</h4>
            </div>
            <div class="modal-body">
                {{ init_form.hidden_tag() }}
                <div class="form-group">
                  <label for="{{ init_form.form.id }}" class="col-sm-3">{% trans %}Checklist form{% endtrans %}</label> <div class="col-sm-9">{{ init_form.form(class_='form-control') }}</div>
                </div>
                <div class="form-group">
                  <label for="{{ init_form.role.id }}" class="col-sm-3">{% trans %}Role{% endtrans %}</label> <div class="col-sm-9">{{ init_form.role(class_='form-control') }}</div>
                </div>
                <div class="form-group">
                  <label for="{{ init_form.location_type.id }}" class="col-sm-3">{% trans %}Location type{% endtrans %}</label> <div class="col-sm-9">{{ init_form.location_type(class_='form-control') }}</div>
                </div>
            </div>
            <div class="modal-footer">
              <button type="submit" form="checklistInitForm" class="btn btn-warning">{% trans %}Create checklists{% endtrans %}</button>
              <button type="button" class="btn btn-default" data-dismiss="modal">{% trans %}Close{% endtrans %}</button>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
{% endblock %}
