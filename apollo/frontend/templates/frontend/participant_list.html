{%- extends 'frontend/_layout.html' -%}{%- from 'frontend/macros/participant_list_filter.html' import render_filter_form -%}
{% block toolbar %}
  <a class="btn btn-info pull-right" href="{{ url_for('participants.participant_list_import') }}"><i class="glyphicon glyphicon-upload glyphicon-white"></i> Import Participants</a>
{% endblock %}
{% block content %}
{%- set flash_msgs = get_flashed_messages(category_filter=['task_begun']) -%}
    <div class="row-fluid">
      <div class="well">
        {{ render_filter_form(filter_form) }}
      </div>
    </div>
{%- if flash_msgs -%}
    <div>
    {%- for msg in flash_msgs -%}
      <p class="alert alert-info">{{ msg }}</p>
    {%- endfor -%}
    </div>
{%- endif -%}
    <div class="row-fluid">
      <div>
      	<table class="table table-bordered table-striped">
         <thead>
           <tr>
             <th>Participant ID</th>
             <th>Name</th>
             <th>Role</th>
             <th>Location</th>
             <th>Organization</th>
             <th>Edit</th>
           </tr>
         </thead>
         <tbody>
           {% for participant in participants.items %}
           <tr>
             <td>{{ participant.participant_id }}</td>
             <td>{{ participant.name }}</td>
             <td>{{ participant.role }}</td>
             <td>{{ participant.location }}</td>
             <td>{{ participant.partner }}</td>
             <td><a href="{{ url_for('participants.participant_edit', pk=participant.id) }}">Edit</a></td>
           </tr>
           {% endfor %}
         </tbody>
        </table>
        {% from 'frontend/macros/pagination.html' import render_pager %}{{ render_pager(participants, 'participants.participant_list', args) }}
      </div>
    </div>
{%- endblock -%}
{%- block scripts -%}
<script src="{{ url_for('static', filename='js/filters.js') }}"></script>
{%- endblock -%}