{% extends "core/layout.html" %}{% load bootstrap_pagination %}
{% block title %}
{{ page_title }}
{% if perms.messagelog.export_messages %}
<a class="btn pull-right" href="{% url messages_list_export "xls" %}">Export</a>
{% endif %}
{% endblock %}
{% block content %}
<div class="row">
  <div class="span12">
    <div class="well" style="padding-bottom:0">
      <form action="" method="post" id="filter">
        {% csrf_token %}
        <div class="controls controls-row">
          {{ filter_form.mobile }}
          {{ filter_form.text }}
          <div class="input-append date span2 datesel" data-date="" data-date-format="yyyy-mm-dd">
            <input class="span2" name="created" placeholder="Date" style="width:129px" size="16" type="text" value="{{ filter_form.created.value|default_if_none:"" }}" readonly="readonly">
            <span class="add-on"><i class="icon-calendar"></i></span>
          </div>
          <button type="submit" style="margin-left:1em" class="btn btn-warning"><i class="icon-search icon-white"></i> Search</button> <a class="btn form-reset" style="margin-left:0.5em">Clear</a>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="row">
  <div class="span12">
    <table class="table table-striped table-bordered table-hover">
      <thead >
        <tr>
          <th>Date</th>
          <th>Mobile</th>
          <th>Direction</th>
          <th>Text</th>
        </tr>
      </thead>
      <tbody>
        {% for message in messages %}
        <tr>
          <td>{{ message.created|date:"D j-M" }}</td>
          <td>{{ message.mobile }}</td>
          <td>{{ message.direction }}</td>
          <td>{{ message.text }}</td>
        </tr>
        {% empty %}
        <tr class="warning">
          <td style="text-align:center" colspan="4">No Data Available</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% if is_paginated %}
<div class="row">
  <div class="span12">
  {% bootstrap_paginate page_obj range=10 %}
  </div>
</div>
{% endif %}
{% endblock %}
