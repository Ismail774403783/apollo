{% extends 'psc/layout.html' %}
{% load query_string %}
{% block content %}
<div class="grid_16">
	<div class="box" style="padding-bottom:1em"> 
		<h2>Voter's Registration Checklist and Incidents</h2>
		<div class="block">
			<div id="filter">
				<form action="" method="get" accept-charset="utf-8">
					<table>
						<thead>
							<tr>
								{% for field in filter_form %}
								<th>{{ field.label }}</th>
								{% endfor %}
								<th>&nbsp;</th>
								<th>&nbsp;</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								{% for field in filter_form %}
								<td>{{ field }}</td>
								{% endfor %}
								<td><input type="button" value="reset"></td>
								<td><input type="submit" value="filter &rarr;"></td>
							</tr>
						</tbody>
					</table>
				</form>
			</div>
			<table>
				<thead>
				<tr>
					<th>Date</th>
					<th>RC</th>
					<th>RCID</th>
					<th>LGA</th>
					<th>District</th>
					<th>State</th>
					<th>Observer</th>
					<th>Supervisor</th>
					<th>1st</th>
					<th>2nd</th>
					<th>3rd</th>
					<th>&nbsp;</th>
				</tr>
				</thead>
				{% for cl in checklists.object_list %}
				<tr{% cycle '' ' class="odd"' %}>
					<td>{{ cl.date|date:"d/m/Y" }}</td>
					<td>{% firstof cl.report_rc cl.location.name|default:"Unknown" %}</td>
					<td>{% firstof cl.report_rcid cl.location.code|default:"999" %}</td>
					<td>{{ cl.observer.location.name|default:"Uknown" }}</td>
					<td>{{ cl.observer.location.parent.name|default:"Uknown" }}</td>
					<td>{{ cl.observer.location.parent.parent.name|default:"Uknown" }}</td>
					<td>{{ cl.observer.name }}</td>
					<td>{{ cl.observer.supervisor.name }}</td>
					<td>
					{% if cl.submitted %}
						<img src="/assets/img/status.png" width="16" height="16" alt="complete" />
					{% else %}
						<img src="/assets/img/status-busy.png" width="16" height="16" alt="none" />
					{% endif %}
					</td>
					<td>
					{% if cl.A and cl.B and cl.C and cl.G %}
						{% if cl.D1 or cl.D2 or cl.D3 or cl.D4 %}
							{% if cl.E1 or cl.E2 or cl.E3 or cl.E4 or cl.E5 %}
								<img src="/assets/img/status.png" width="16" height="16" alt="complete" />
							{% endif %}
						{% endif %}
					{% else %}
					{% if cl.A or cl.B or cl.C or cl.D1 or cl.D2 or cl.D3 or cl.D4 or cl.E1 or cl.E2 or cl.E3 or cl.E4 or cl.E5 or cl.F or cl.G %}
						<img src="/assets/img/status-away.png" width="16" height="16" alt="incomplete" />
					{% else %}
						<img src="/assets/img/status-busy.png" width="16" height="16" alt="none" />
					{% endif %}
					{% endif %}
					</td>
					<td>
					{% if cl.H and cl.J and cl.K and cl.M and cl.N and cl.P and cl.Q and cl.R and cl.S and cl.T and cl.U and cl.V and cl.W and cl.X and cl.Y and cl.Z and cl.AA %}
					<img src="/assets/img/status.png" width="16" height="16" alt="complete" />
					{% else %}
					{% if cl.H or cl.J or cl.K or cl.M or cl.N or cl.P or cl.Q or cl.R or cl.S or cl.T or cl.U or cl.V or cl.W or cl.X or cl.Y or cl.Z or cl.AA %}
					<img src="/assets/img/status-away.png" width="16" height="16" alt="incomplete" />
					{% else %}
					<img src="/assets/img/status-busy.png" width="16" height="16" alt="none" />
					{% endif %}
					{% endif %}
					</td>
					<td><a href="{% url psc.views.vr_checklist cl.id %}">Edit</a></td>
				</tr>
				{% empty %}
				<tr>
					<td colspan="12" class="nodata">No reports yet</td>
				</tr>
				{% endfor %}
			</table>
		</div>
		{% if checklists.has_other_pages %}
		<div class="paginator">
			{% if checklists.has_previous %}
			<a href="{% query_string "page=checklists.previous_page_number" "" %}"><span>&laquo;</span></a>
			{% endif %}
			<span class="current">Page {{ checklists.number }} of {{ checklists.paginator.num_pages }}</span>
			{% if checklists.has_next %}
			<a href="{% query_string "page=checklists.next_page_number" "" %}"><span>&raquo;</span></a>
			{% endif %}
		</div>
		{% endif %}
	</div>
</div>

{% endblock %}
